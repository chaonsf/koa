!function(e){var t={};function n(a){if(t[a])return t[a].exports;var i=t[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:a})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=65)}({0:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"commumal",function(){return m});var a=n(1),i=(n.n(a),n(2)),l=(n.n(i),n(3)),s=(n.n(l),n(4)),d=(n.n(s),n(5)),o=(n.n(d),n(6)),c=n(7),r=n(8),u=n(9),_=n(10);n.d(t,"descroll",function(){return o.a}),n.d(t,"Applyer",function(){return c.a}),n.d(t,"listWindow",function(){return r.a}),n.d(t,"addition",function(){return u.a}),n.d(t,"versionUpdate",function(){return _.a});var f=null,m={dateToday(e){let t=moment().format("YYYY-MM-DD"),n="";return n=moment(e).format("YYYY-MM-DD")==t?"今天":moment(e).add(1,"d").format("YYYY-MM-DD")==t?"昨天":moment(e).add(2,"d").format("YYYY-MM-DD")==t?"前天":moment(e).add(3,"d").format("YYYY-MM-DD")==t?"大前天":e},timePicker(e){f=weui.datePicker({start:2017,end:2050,defaultValue:e.default,onConfirm:function(t){$("."+e.className).find(".weui-picker").on("animationend webkitAnimationEnd mozAnimationEnd MSAnimationEnd oAnimationEnd",function(){m.HourMin(e.finger,t,e.hours,e.className)})},id:e.className,className:e.className})},HourMin(e,t,n,a){t[1]=t[1]-1;var i=moment(t).format("YYYY-MM-DD");if(!m.hours.length)for(var l=0;l<24;l++){var s={};s.label=1===(""+l).length?"0"+l:""+l,s.value=l,m.hours.push(s)}if(!m.minites.length)for(var d=0;d<60;d++){var o={};o.label=1===(""+d).length?"0"+d:""+d,o.value=d,m.minites.push(o)}f=weui.picker(m.hours,m.symbol,m.minites,{defaultValue:n,onConfirm:function(t){var n=t[0].label+":"+t[2].label,a=i+" "+n;$(e).val(a)},id:"f"+a})},hours:[],minites:[],symbol:[{label:":",value:0}],isEmptyObj(e){for(let t in e)return!1;return!0},caching(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"EHUSER";return localStorage.getItem(e)},uploader:0,picture(e){weui.uploader(e.ids,{url:"../file/Upload",auto:!1,onQueued:e.queued,onBeforeSend:e.beforeSend,onBeforeQueued(e){return["image/jpg","image/jpeg","image/png","image/gif"].indexOf(this.type)<0?(weui.alert("请上传图片"),!1):this.size>8388608?(weui.alert("请上传不超过8M的图片"),!1):e.length>8?(weui.alert("最多只能上传8张图片，请重新选择"),!1):m.uploader+1>8?(weui.alert("最多只能上传8张图片"),!1):void++m.uploader},onProgress(e){},onSuccess:e.success,onError(e){}})},onShowImg(e){for(var t=$(e.target);!t.hasClass("weui-uploader__file")&&t;)t=t.parent();if(t.length){var n=t.attr("style")||"";t.data("id");n&&(n=n.match(/url\((.*?)\)/)[1].replace(/"/g,""));var a=weui.gallery(n,{onDelete:function(){weui.confirm("确定删除该图片？",function(){t.remove(),--m.uploader,a.hide()})}})}},urlencode:e=>(e=(e+"").toString(),encodeURIComponent(e).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/%20/g,"+")),back(){history.go(-1)},confirm(e){f=weui.confirm("",{title:e.title||"是否确定提交?",buttons:[{label:"取消",type:"default"},{label:"确定",type:"primary",onClick:e.click}]})},datePicker(e){let t=moment().format("YYYY-MM-DD").split("-"),n=e.dateTime,a=(new Date).getFullYear();f=weui.datePicker({start:a,end:2032,defaultValue:""==n?[t[0],t[1],t[2]]:[n[0],n[1],n[2]],onConfirm:t=>{e.confirm(t)},id:e.id})},reimbursePicker(e){f=weui.picker(e.data,{depth:1,defaultValue:e.default,onConfirm(t){e.confirm(t)},id:e.id})},isThrough(){$("#switchCP").prop("checked")?$("label.result").text("审核通过"):$("label.result").text("审核不通过")},notice(){$.defs.myPost({m:"SELECT",SP_NAME:"SP_DPPS_ALARM_SHOW"}).then(e=>{$(".lingdang").html(e[0].WCOUNT),0==e[0].WCOUNT?$(".lingdang").hide():(localStorage.getItem("status")||m.noticeList(),localStorage.setItem("status","notRefresh"))})},noticeList(){$.defs.loadingshow(),$.defs.myPost({m:"SELECT",SP_NAME:"SP_DPPS_ALARM_SHOW",TYPE:"list"}).then(e=>{$.defs.loadinghide();let t=m.noticeListHtml(e);f=weui.dialog({title:"消息",content:t.html(),className:"custom-classn",buttons:[{label:"关闭",type:"primary"}]}),$(f).find(".weui-dialog__bd").addClass("padding0"),$(f).find(".weui-cell").on("click",function(){var e=$(this).closest(".weui-cell").attr("index");window.location.href="../index/audited",localStorage.setItem("audited",e),f.hide()})})},noticeListHtml(e){let t="";e.forEach(e=>{e.OA_LINK&&(t+=`\n                   <div class="weui-cell weui-cell_access borTine f12" index="${e.OA_TYPE}">\n                    <div class="weui-cell__bd">\n                       <span>${e.OA_TYPE_DESC}</span>\n                       <span class="ml10 weui-badge">${e.WCOUNT}</span>\n                    </div>\n                     <div class="weui-cell__ft"></div>\n                   </div>\n                  `)});let n=$('<div  class="tips dn">\n                       <div class="weui-cells"></div>\n                    </div>');return n.find(".weui-cells").append(t),n},versionAndNotice(){var e=localStorage.getItem("version")?localStorage.getItem("version"):0;_.a.config.versionNumber>e?(localStorage.setItem("version",_.a.config.versionNumber),_.a.events.version(m.notice)):m.notice()},loadDate:function(){var e=$(".seledate").find("span"),t=new Date,n=t.getDate(),a=t.getMonth(),i=t.getFullYear();11==a&&(a=-1,i+=1),$.each(e,function(e,t){var l=$(t).attr("data-index");1==l?($(t).attr("data-start",moment().subtract(n-1,"d").format("YYYY-MM-DD")),$(t).attr("data-end",moment([i,a+1,1]).subtract(1,"d").format("YYYY-MM-DD"))):2==l?($(t).attr("data-start",moment().subtract(n-1,"d").subtract(1,"M").format("YYYY-MM-DD")),$(t).attr("data-end",moment().subtract(n,"d").format("YYYY-MM-DD"))):3==l&&($(t).attr("data-start",moment().subtract(n-1,"d").subtract(2,"M").format("YYYY-MM-DD")),$(t).attr("data-end",moment([i,a+1,1]).subtract(1,"d").format("YYYY-MM-DD")))}),m.timeFrame()},spanSelect:function(){$(this).addClass("seleted").siblings().removeClass("seleted"),m.timeFrame()},timeFrame:function(){var e=$(".seleted").attr("data-start"),t=$(".seleted").attr("data-end");$(".shijian span").html(e+"至"+t)}};$(function(){window.addEventListener("resize",function(){"INPUT"!==document.activeElement.tagName&&"TEXTAREA"!==document.activeElement.tagName||document.activeElement.scrollIntoView({behavior:"smooth"})}),window.addEventListener("pageshow",function(e){e.persisted&&location.href==location.protocol+"//"+location.host+"/oa/index/index"&&(localStorage.removeItem("DATE"),localStorage.removeItem("audited"),localStorage.removeItem("MoreDate"),localStorage.removeItem("auditMore"))}),$("h2.back").off("click").on("click",m.back),window.onhashchange=function(e){$.hidebox(),f&&f.hide()},$(".lingdang").off("click").on("click",()=>{m.noticeList()}),$(".icon-icon--").off("click").on("click",()=>{m.noticeList()});let e=location.protocol+"//"+location.host+"/oa/login/index";document.referrer!=e&&m.notice(),$("input").on("blur",()=>{setTimeout(function(){window.scrollTo(0,0)},100)})})},1:function(e,t){},10:function(e,t,n){"use strict";var a={events:{str:e=>{return`\n            <div class="weui-article">\n            <h1>版本更新介绍</h1>\n            <div class="boxa">\n            <section>\n               <h3 class="blue">当前版本：v${e}<a class="ml10 shouce">下载操作手册</a></h3>\n                <h4>一、新增待审核模块</h4>\n                <p>1、将之前的报销管理、外勤管理、员工请假以及加班申请模块里的待审核部分整合出来作为一个单独的模块。</p>\n                <h4>二、优化页面布局</h4>\n                <p>1、在可视区域宽度大于768px的设备中，网页都以375px的宽度居中显示</p>\n                <p>2、之前版本各个模板都在一个单页面中，当前版本将每个模块独立为一个单页面</p>\n                <p>3、更换了模块内按条件搜索的布局</p>\n                <h4>三.页面图标的更换</h4>\n            </section>\n  \n            </div>\n           </div>\n            `},version:e=>{let t=a.events.str(a.config.versionNumber);$.showbox({content:t,cls:"tyi",buttons:[{text:"关闭",click:function(){"function"==typeof e&&e(),$.hidebox()}}],beforeShow:function(){$(".popup_content").addClass("ver"),$(".tyi").find("a.shouce").on("click",function(){location="../static/document/OA_Manual.pdf"})}})}},config:{versionNumber:3.1}};t.a=a},2:function(e,t){},3:function(e,t){},4:function(e,t){},5:function(e,t){},6:function(e,t,n){"use strict";var a={events:{onscroll:function(e,t){e.scrollHeight-e.offsetHeight-e.scrollTop<100&&(a.config.page.index<=a.config.total?a.config.isLoad&&(a.config.isLoad=!1,t.datafresh()):a.config.page.index>a.config.total&&a.config.isLoad&&$(".page__ft:last").removeClass("dn")),e.scrollHeight-e.offsetHeight-e.scrollTop>100&&$(".page__ft").addClass("dn")}},config:{page:{index:1,rows:10},isLoad:!0,total:1,pages:function(e){a.config.total=Math.ceil(parseFloat(e.total/a.config.page.rows))}}};t.a=a},65:function(module,__webpack_exports__,__webpack_require__){"use strict";Object.defineProperty(__webpack_exports__,"__esModule",{value:!0});var __WEBPACK_IMPORTED_MODULE_0__public__=__webpack_require__(0),query={param:"",methods:{init(){$(".btnBack").on("click",__WEBPACK_IMPORTED_MODULE_0__public__.commumal.back),$(".submit").on("click",query.events.submit)}},events:{loadData(e){$.defs.loadingshow(),$.defs.myPost({m:"multi_result",SP_NAME:"SP_RBRB_PRE_LOAD",RBRB_KY:e}).then(e=>{$.defs.loadinghide();var t=e;let n=t.result||t;if(0==n.RETURN_CODE){let{rbrb_info:e,rbrb_auditing:n,rbrb_images:l}=t;var a=query.config.DESC([e],n),i=query.events.estimate(a);let s=query.events.content(i),d=$(s);$(".addReport").append(d),query.events.fillImage(l)}else $.defs.msg(n.RETURN_MESSAGE)})},estimate(data){for(var i=0;i<data.length;i++)if(""!=data[i].FORMULA){var rc1=template.render(data[i].FORMULA,{LIMIT_AC:data[i].LIMIT_STAY_AMT,LIMIT_BH:data[i].LIMIT_ENTT_AMT,LIMIT_TM:data[i].LIMIT_FOOD_AMT,ATDC_DAY:data[i].ATDC_DAY,ATDC_HUMAN_CNT:data[i].ATDC_HUMAN_CNT}),preturn=eval(rc1);data[i].cost=preturn}else data[i].cost="";return data},content(e){let t="";for(let n=0;n<e.length;n++)t+=`\n               <div class='matter'  rbrb_ky="${e[n].RBRB_KY}">\n                 <div class="messageDisplay">\n                     <span>报销单信息</span>\n                     <span class="through fr">${e[n].RBRB_STS_DESC}</span>\n                     <span class="fr billId">${e[n].RBRB_ID_STRING||e[n].RBRB_ID}</span>\n                 </div>\n                 <div class="weui-cells weui-cells_form f12 mt0">\n                   <div class="weui-cell">\n                     <div class="weui-cell__hd"><label class="weui-label">报销用途</label></div>\n                     <div class="weui-cell__bd">\n                       <p class="yongtu">\n                           <i class="iconfont icon-baoxiao"></i>\n                          <span  field='PURPOSE'>${e[n].PURPOSE}</span>\n                       </p>\n                     </div>\n                   </div>\n                   <div class="weui-cell">\n                      <div class="weui-cell__hd"><label class="weui-label">报销类型</label></div>\n                      <div class="weui-cell__bd">\n                        <p class="leixing">\n                           <i class="iconfont icon-baoxiao"></i>\n                           <span field='FEPP_NAME'>${e[n].FEPP_NAME}</span>\n                        </p>\n                       </div>\n                   </div>\n                   <div class="weui-cell">\n                       <div class="weui-cell__hd"><label class="weui-label">类型说明</label></div>\n                      <div class="weui-cell__bd">\n                          <p>\n                             <i class="iconfont icon-leixingshuoming"></i>\n                             <span field='OTH_FEPP_DESC'>${e[n].OTH_FEPP_DESC}</span>\n                         </p>\n                     </div>\n                   </div>\n                   <div class="weui-cell">\n                       <div class="weui-cell__hd"><label class="weui-label">费用</label></div>\n                       <div class="weui-cell__bd">\n                           <i class="iconfont icon-feiyong"></i>\n                           <span field='RBRB_APPLY_AMT'>${e[n].RBRB_APPLY_AMT}</span>\n                       </div>\n                    </div>\n                    <div class="weui-cell">\n                       <div class="weui-cell__hd"><label for="" class="weui-label">发生日期</label></div>\n                        <div class="weui-cell__bd ">\n                           <i class="iconfont icon-riqi"></i>\n                           <span field="RBRB_APPLY_DT">${e[n].RBRB_APPLY_DT}</span>\n                       </div>\n                    </div>\n                    <div class="weui-cell">\n                      <div class="weui-cell__hd"><label for="" class="weui-label">收款人</label></div>\n                      <div class="weui-cell__bd">\n                          <i class="iconfont icon-shoukuanren"></i>\n                           <span field='PAYEE_KY_DESC'>${e[n].PAYEE_KY_DESC}</span>\n                      </div>\n                    </div>\n                    <div class="weui-cell">\n                     <div class="weui-cell__hd"><label for="" class="weui-label">申请人</label></div>\n                      <div class="weui-cell__bd ">\n                          <i class="iconfont icon-shenqingren"></i>\n                          <span field='MEME_NAME'>${e[n].MEME_NAME}</span>\n                      </div>\n                    </div>\n                    <div class="weui-cell">\n                      <div class="weui-cell__hd"><label for="" class="weui-label">申请日期</label></div>\n                      <div class="weui-cell__bd ">\n                         <i class="iconfont icon-riqi"></i>\n                         <span field="RBRB_ENTRY_DT">${e[n].RBRB_ENTRY_DT}</span>\n                      </div>\n                    </div>\n                    <div class="weui-cell">\n                      <div class="weui-cell__hd"><label class="weui-label">附加单据</label></div>\n                       <div class="weui-cell__bd">\n                            <i class="iconfont icon-danju"></i>\n                            <span class="fujiadanju">${e[n].ATDC_ID}${e[n].ATDC_ID?"-":""}${e[n].SYSV_ATDC_TYPE_DESC}</span>\n                       </div>\n                    </div>\n                    <div class="weui-cell">\n                      <div class="weui-cell__hd"><label class="weui-label">备注</label></div>\n                      <div class="weui-cell__bd">\n                          <i class="iconfont icon-xinxitianxie"></i>\n                          <input class='weui-input blue comment' field='RBRB_COMMENT' style='width:90%' value='${e[n].RBRB_COMMENT}' placeholder="备注"/>\n                      </div>\n                    </div>\n                 </div>\n                  ${query.events.reportContent(e[n])}\n                  <div class="weui-cells weui-cells_form" id="uploaderCustom">\n                  <div class="weui-cell  padding0">\n                      <div class="weui-cell__bd">\n                          <div class="weui-uploader">\n                              <div class="weui-uploader__hd">\n                                  <p class="weui-uploader__title f12">查看图片</p>\n                              </div>\n                              <div class="weui-uploader__bd">\n                                  <ul class="weui-uploader__files uploaderCustomFiles">\n  \n                                  </ul>\n                              </div>\n                          </div>\n                      </div>\n                  </div>\n                 </div>\n                 <div class="addComment">\n                   <p class="messageDisplay">审核说明</p>\n                 ${query.events.audHtml(e[n].DESC)}\n                 </div>\n                  </div>\n               </div>\n            `;return t},reportContent(e){let t="";return e.ATDC_ID&&(t+=`\n                 <div class="baobei">\n                   <p class="messageDisplay">报备费用预估</p>\n                   <div class="weui-cells weui-cells_form f12 mt0">\n                     <div class="weui-cell">\n                       <div class="weui-cell__hd"><label for="" class="weui-label">报备时间</label></div>\n                       <div class="weui-cell__bd ">\n                           <i class="iconfont icon-riqi"></i>\n                           <span field="ATDC_START_DT">${e.ATDC_START_DT}</span>\n                        </div>\n                     </div>\n                      <div class="weui-cell">\n                        <div class="weui-cell__hd"><label class="weui-label">详细地址</label></div>\n                        <div class="weui-cell__bd">\n                             <i class="iconfont icon-didian"></i>\n                            <span>${e.BSTR_NAME}${e.ATDC_SITE?"("+e.ATDC_SITE+")":""}</span>   \n                        </div>\n                      </div>\n                      ${query.events.businessOrReport(e)}\n                      <div class="weui-cell ">\n                        <div class="weui-cell__hd"><label class="weui-label">计算费用</label></div>\n                         <div class="weui-cell__bd ">\n                              <i class="iconfont icon-feiyong"></i>\n                              <span  class="cost">${e.cost}</span>\n                        </div>\n                      </div>\n                   </div>\n                 </div>\n               `),t},businessOrReport(e){let t="";return"出差"==e.SYSV_ATDC_TYPE_DESC?t+=`\n             <div class="weui-cell">\n               <div class="weui-cell__hd"><label class="weui-label">出差天数</label></div>\n               <div class="weui-cell__bd">\n                 <i class="iconfont icon-tianshu"></i>\n                 <span>${e.ATDC_DAY}</span>\n               </div>\n             </div>\n             <div class="weui-cell">\n                <div class="weui-cell__hd"><label class="weui-label">出差人数</label></div>\n               <div class="weui-cell__bd">\n                   <i class="iconfont icon-renshu"></i>\n                   <span>${e.ATDC_HUMAN_CNT}</span>\n               </div>\n             </div>\n             `:"外勤招待"==e.SYSV_ATDC_TYPE_DESC&&(t+=`\n             <div class="weui-cell">\n               <div class="weui-cell__hd"><label class="weui-label">招待人数</label></div>\n               <div class="weui-cell__bd">\n                  <i class="iconfont icon-renshu"></i>\n                  <span>${e.ATDC_HUMAN_CNT}</span>\n               </div>\n            </div>\n             `),t},audHtml(e){let t="";for(let n=0;n<e.length;n++)t+=`\n            <div class="clearfix borderDesc  f12">\n              <p>\n                <span>${e[n].MEME_NAME}-${e[n].STLG_DTM}</span>\n                <span class="fr">${e[n].STLG_STS_DESC}</span>\n               </p>\n               <p class="db">备注 :${e[n].STLG_COMMENT}</p>\n            </div>\n          `;return t},fillImage(e){let t="";$.each(e,(e,n)=>{t+=` <li class='weui-uploader__file' imim_ky='${n.RBIM_KY}' rbrb_ky='${n.RBRB_KY}' style='background-image:url("../file/Transmit?fileName=${__WEBPACK_IMPORTED_MODULE_0__public__.commumal.urlencode(n.RBIM_NAME_PATH)}")'></li>`}),$(".uploaderCustomFiles").append(t),$(".uploaderCustomFiles").on("click",query.events.onShowImg)},onShowImg(e){for(var t=$(e.target);!t.hasClass("weui-uploader__file")&&t;)t=t.parent();if(t.length){var n=t.attr("style")||"";t.data("id");n&&(n=n.match(/url\((.*?)\)/)[1].replace(/"/g,""));weui.gallery(n,{className:"deleted"})}},submit(){__WEBPACK_IMPORTED_MODULE_0__public__.commumal.confirm({click:()=>{query.events.submitEnd()}})},submitEnd(){$.defs.loadingshow(),$.defs.myPost({m:"UPDATE",SP_NAME:"SP_RBRB_REIMBURSE_INFO_OTH_UPDATE",RBRB_KY:query.param.content.RBRB_KY,RBRB_COMMENT:$("input.comment").val()}).then(e=>{$.defs.loadinghide(),0==e.RETURN_CODE?(weui.toast("操作成功",2500),setTimeout(()=>{history.go(-1)},2600)):$.defs.msg(e.RETURN_MESSAGE)})}},config:{init(){$(".top .huan").text("报销管理>查看");let e=spspa.getMessage("param");spspa.clearMessage();$.defs.getQueryString();query.param=e,__WEBPACK_IMPORTED_MODULE_0__public__.commumal.isEmptyObj(e)?history.go(-1):query.events.loadData(e.content.RBRB_KY)},DESC:(e,t)=>($.each(e,function(e,n){var a=[];$.each(t,function(e,t){n.RBRB_KY==t.RBRB_KY&&a.push(t)}),0!=a.length&&(n.DESC=a)}),e)}};$(function(){query.config.init(),query.methods.init()})},7:function(e,t,n){"use strict";var a={content:()=>$('\n           <div class="weui-cell">\n             <div class="weui-cell__bd">\n                <input class="weui-input"  placeholder="请输入工号或姓名"/>\n             </div>\n             <div class="weui-cell__ft">\n                <span class="weui-vcode-btn query">查询</span>\n              </div>\n          </div>\n          <div class="member" style="padding:10px">\n            \n          </div>\n           '),employee(e){let t=this,n=a.content();$.showbox({content:n,cls:"staff",buttons:[{text:"关闭",click(){$.hidebox()}}],beforeShow(){t.query(e)}})},query(e){var t=$(".staff").find(".weui-input").val();$.defs.loadingshow(),$.defs.myPost({m:"LIST",SP_NAME:"SP_DPPS_APPLY_LIST",MEME_QUERY:t}).then(t=>{$.defs.loadinghide(),$(".staff").find(".query").on("click",()=>{a.query(e)});let n=t.rows,i=a.staffList(n),l=$(i);$(".staff").find(".member").html(l),$(".staff").find(".membersName").on("click",function(){let t=this;"function"==typeof e.span&&e.span(t)})})},staffList(e){let t="";for(let n=0;n<e.length;n++)t+=`\n              <span class="membersName" apps="${e[n].DPPS_KY}">${e[n].MEME_NAME}(${e[n].DPDP_NAME})</span>\n             `;return t}};t.a=a},8:function(e,t,n){"use strict";var a=n(0),i={content:()=>"\n          <div class='drawer'>\n            <input type='text' class='input' placeholder=\"姓名、单号\">\n          <p class='headline'>日期:</p>\n            <ul class='date'>\n              <li class='seleted' data-index='0'>今天</li>\n              <li data-index='1'>一周</li>\n              <li data-index=\"2\">三周</li>\n              <li data-index=\"3\">当月</li>\n              <li data-index=\"4\">三月</li>\n              <li data-index=\"5\">半年</li>\n              <li data-index=\"6\">一年</li>\n           </ul>\n        </div>\n          ",query(e){let t=i.content(),n=$(t);$.showbox({content:n,cls:"select",buttons:[{text:"查询",click:function(){let t=i.getData();"function"==typeof e.loadCondition&&e.loadCondition(t),"function"==typeof e.fresh&&e.fresh(t),localStorage.setItem(e.cache,JSON.stringify(t)),$.hidebox()}}],beforeShow:function(){i.fillTime();let t=JSON.parse(a.commumal.caching(e.cache));t&&i.handleCondition(t),$(".select").find(".date li").on("click",i.liClick)}})},fillTime(){var e=$(".select").find(".date li"),t=new Date,n=t.getMonth(),a=t.getFullYear(),i=t.getDate(),l=t.getDay();11==n&&(n=-1,a+=1),$.each(e,(e,t)=>{let s=$(t).attr("data-index");0==s?($(t).attr("data-start",moment().format("YYYY-MM-DD")),$(t).attr("data-end",moment().format("YYYY-MM-DD"))):1==s?0!=l?($(t).attr("data-start",moment().subtract(l-1,"d").format("YYYY-MM-DD")),$(t).attr("data-end",moment().subtract(l-7,"d").format("YYYY-MM-DD"))):($(t).attr("data-start",moment().subtract(6,"d").format("YYYY-MM-DD")),$(t).attr("data-end",moment().format("YYYY-MM-DD"))):2==s?0!=l?($(t).attr("data-start",moment().subtract(13+l,"d").format("YYYY-MM-DD")),$(t).attr("data-end",moment().subtract(l-7,"d").format("YYYY-MM-DD"))):($(t).attr("data-start",moment().subtract(21,"d").format("YYYY-MM-DD")),$(t).attr("data-end",moment().format("YYYY-MM-DD"))):3==s?($(t).attr("data-start",moment().subtract(i-1,"d").format("YYYY-MM-DD")),$(t).attr("data-end",moment([a,n+1,1]).subtract(1,"d").format("YYYY-MM-DD"))):4==s?($(t).attr("data-start",moment().subtract(i-1,"d").subtract(2,"M").format("YYYY-MM-DD")),$(t).attr("data-end",moment([a,n+1,1]).subtract(1,"d").format("YYYY-MM-DD"))):5==s?($(t).attr("data-start",moment().subtract(i-1,"d").subtract(5,"M").format("YYYY-MM-DD")),$(t).attr("data-end",moment([a,n+1,1]).subtract(1,"d").format("YYYY-MM-DD"))):6==s&&($(t).attr("data-start",moment().subtract(i-1,"d").subtract(11,"M").format("YYYY-MM-DD")),$(t).attr("data-end",moment([a,n+1,1]).subtract(1,"d").format("YYYY-MM-DD")))})},handleCondition(e){for(let t=0;t<e.length;t++){let n=e[t];0==n.value.index?$(".select .input").val(n.name):$(".select .date li[data-start="+n.value.value.start+"][data-end="+n.value.value.end+"]").addClass("seleted").siblings().removeClass("seleted")}},liClick(){$(this).addClass("seleted").siblings().removeClass("seleted")},getData(){let e,t=$(".select").find(".input").val(),n=$(".select").find(".date .seleted");return e=t?[{name:t,value:{index:0,value:t}},{name:n.text(),value:{index:1,value:{start:n.attr("data-start"),end:n.attr("data-end")}}}]:[{name:n.text(),value:{index:1,value:{start:n.attr("data-start"),end:n.attr("data-end")}}}]},defaultDelete(){$(this).closest("li").remove()},backToStartPoint(){$(".content").scrollTop(0),$(".getMore").addClass("dn")}};t.a=i},9:function(e,t,n){"use strict";var a={list:null,content:()=>$('\n           <div class="weui-cell">\n              <div class="weui-cell__bd">\n               <input class="weui-input"  placeholder="请输入工号或姓名"/>\n             </div>\n              <div class="weui-cell__ft">\n                <span class="weui-vcode-btn query">查询</span>\n              </div>\n            </div>\n            <div class="weui-cells receip f12">\n\n            </div>\n           '),bills(e){let t=a.content();$.showbox({content:t,cls:"Additionreceipts",buttons:[{text:"关闭",click(){$.hidebox()}}],beforeShow(){a.query(e)}})},query(e){$.defs.loadingshow(),$.defs.myPost({SP_NAME:"SP_ATDC_ATTENDANCE_INFO_FEPP_LIST",m:"SELECT",QUERY:$(".Additionreceipts").find(".weui-input").val(),APPLY_EHUSER:$(".applyUser").attr("data-value"),DATE:$(".SelectedDate").find("span").text()}).then(t=>{$.defs.loadinghide(),a.list=t,$(".Additionreceipts").find(".query").on("click",()=>{a.query(e)});let n=a.billList(t),i=$(n);$(".Additionreceipts").find(".receip").html(i),$(".Additionreceipts").find(".add_rep").on("click",function(){let t=this;"function"==typeof e.span&&e.span(t)})})},billList(e){let t="";for(let n=0;n<e.length;n++)t+=`\n                <div class="weui-cell add_rep" ATDC_KY="${e[n].ATDC_KY}" style="border-bottom: 1px solid #ccc">\n                 <div class="weui-cell__bd">\n                    <p class="number"><span class="cardNumber">${e[n].ATDC_ID}</span><span class="fr cardType">${e[n].SYSV_ATDC_DESC}</span></p>\n                    <p>${e[n].ATDC_START_DT}起${e[n].ATDC_DAY}天${e[n].ATDC_HUMAN_CNT}人</p>\n                    <p>地区范围:${e[n].BSTR_NAME}</p>\n                    <p>详细地址:${e[n].ATDC_SITE}</p>\n                 </div>\n                </div>\n               `;return t}};t.a=a}});
//# sourceMappingURL=reimburseQuery.js.map